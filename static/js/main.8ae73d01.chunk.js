(this["webpackJsonpcollege-navigator"]=this["webpackJsonpcollege-navigator"]||[]).push([[0],{46:function(e,t,o){},70:function(e,t,o){},71:function(e,t,o){"use strict";o.r(t);var s=o(1),n=o(2),a=o.n(n),c=o(36),l=o.n(c),r=(o(46),o(9)),i=o(10),d=o(12),h=o(11),u=o(18),j=o(4),b=o(37),p=o.n(b),v=o(22);o(63);v.a.initializeApp({apiKey:"AIzaSyCx_22IVNfxHM8TyjNoRqbqbf30j2flMgU",authDomain:"collegenavigator-40c76.firebaseapp.com",projectId:"collegenavigator-40c76",storageBucket:"collegenavigator-40c76.appspot.com",messagingSenderId:"497329332909",appId:"1:497329332909:web:c15591a2de202a9fe99c24"});var O=v.a,y=function(e){Object(d.a)(o,e);var t=Object(h.a)(o);function o(){var e;return Object(r.a)(this,o),(e=t.call(this)).state={favouriteLength:[]},e}return Object(i.a)(o,[{key:"componentDidMount",value:function(){var e=this;O.database().ref().on("value",(function(t){var o=t.val().Favourites;console.log(o,"please work or i'll be sad");var s,n=[];for(var a in o)s=o[a],n.push(s);console.log(n.length-1),e.setState({favouritesLength:n.length-1})}))}},{key:"render",value:function(){var e=this.props,t=e.schoolHandler,o=e.radiusHandler,n=e.handleCityInput,a=e.handleCountryInput,c=e.submitHandler;return Object(s.jsxs)("header",{children:[Object(s.jsx)("h1",{children:"College Navigator"}),Object(s.jsxs)("form",{action:"submit",onSubmit:c,children:[Object(s.jsxs)("div",{className:"cityInputs",children:[Object(s.jsx)("input",{onChange:n,type:"text",placeholder:"City",id:"citySearch",required:!0}),Object(s.jsx)("label",{className:"srOnly",htmlFor:"citySearch",children:"Please enter a city to search"}),Object(s.jsx)("input",{onChange:a,type:"text",placeholder:"Province/State OR Country",id:"countrySearch",required:!0}),Object(s.jsx)("label",{className:"srOnly",htmlFor:"countrySearch",children:"Please enter the country the city is in"})]}),Object(s.jsxs)("div",{className:"radiusInputs",children:[Object(s.jsx)("legend",{children:"Search Radius"}),Object(s.jsx)("input",{onChange:o,type:"radio",id:"shortRadius",name:"radius",value:"5000",required:!0}),Object(s.jsx)("label",{htmlFor:"shortRadius",children:"5KM"}),Object(s.jsx)("input",{onChange:o,type:"radio",id:"mediumRadius",name:"radius",value:"10000"}),Object(s.jsx)("label",{htmlFor:"mediumRadius",children:"10KM"}),Object(s.jsx)("input",{onChange:o,type:"radio",id:"longRadius",name:"radius",value:"25000"}),Object(s.jsx)("label",{htmlFor:"longRadius",children:"25KM"}),Object(s.jsx)("input",{onChange:o,type:"radio",id:"xlongRadius",name:"radius",value:"50000"}),Object(s.jsx)("label",{htmlFor:"xlongRadius",children:"50KM"})]}),Object(s.jsxs)("div",{className:"schoolTypeInputs",children:[Object(s.jsx)("legend",{children:"School Type"}),Object(s.jsx)("input",{onChange:t,type:"radio",id:"university",name:"schoolType",value:"4bf58dd8d48988d1ae941735",required:!0}),Object(s.jsx)("label",{htmlFor:"university",children:"University"}),Object(s.jsx)("input",{onChange:t,type:"radio",id:"college",name:"schoolType",value:"4bf58dd8d48988d1a2941735"}),Object(s.jsx)("label",{htmlFor:"college",children:"College"}),Object(s.jsx)("input",{onChange:t,type:"radio",id:"tradeSchool",name:"schoolType",value:"4bf58dd8d48988d1ad941735"}),Object(s.jsx)("label",{htmlFor:"tradeSchool",children:"Trade School"})]}),Object(s.jsx)("button",{children:"Find Me Schools!"})]}),Object(s.jsx)("nav",{children:Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{children:"USERNAME!!!!"}),Object(s.jsx)("li",{children:Object(s.jsx)(u.b,{activeClassName:"active",exact:!0,to:"/",children:"Home"})}),Object(s.jsx)("li",{children:Object(s.jsxs)(u.b,{activeClassName:"active",to:"/favourites",children:["Favourite Schools (",this.state.favouritesLength,")"]})}),Object(s.jsx)("li",{children:Object(s.jsx)(u.b,{activeClassName:"active",to:"/addSchool",children:"Add School"})})]})})]})}}]),o}(n.Component),m=o(39),x=function(e){Object(d.a)(o,e);var t=Object(h.a)(o);function o(){var e;return Object(r.a)(this,o),(e=t.call(this)).handleAddFav=function(e,t){var o=O.database().ref("Favourites"),s={schoolName:e,schoolAddress:Object(m.a)(t),schoolNotes:""};o.push(s)},e.state={savedSchool:{schoolName:"",schoolAddress:[]}},e}return Object(i.a)(o,[{key:"render",value:function(){var e=this;return Object(s.jsxs)(n.Fragment,{children:[Object(s.jsxs)("h2",{children:["Your search results for ",this.props.userCityInput,", ",this.props.userCountryInput]}),this.props.schoolResults.map((function(t){return Object(s.jsxs)("div",{className:"schoolResults",children:[Object(s.jsxs)("details",{children:[Object(s.jsx)("summary",{children:t.name}),Object(s.jsx)("p",{children:t.location.formattedAddress.join(", ")})]},t.id),Object(s.jsx)("button",{onClick:function(){e.handleAddFav(t.name,t.location.formattedAddress)},children:"Add to favourites"})]})})),this.props.schoolsAdded.map((function(t){return Object(s.jsxs)("div",{className:"schoolResults",children:[Object(s.jsxs)("details",{children:[Object(s.jsx)("summary",{children:t.schoolName}),Object(s.jsx)("p",{children:t.schoolAddress.join(", ")})]},t.id),Object(s.jsx)("button",{onClick:function(){e.handleAddFav(t.schoolName,t.schoolAddress)},children:"Add to favourites"})]})}))]})}}]),o}(n.Component),f=(o(70),o(40)),g=function(e){Object(d.a)(o,e);var t=Object(h.a)(o);function o(){var e;return Object(r.a)(this,o),(e=t.call(this)).addSchool=function(t){t.preventDefault();var o=[e.state.schoolAddress.street,e.state.schoolAddress.city+" "+e.state.schoolAddress.province+" "+e.state.schoolAddress.postalCode,e.state.schoolAddress.country],s=O.database().ref("NewSchools"),n={schoolName:e.state.schoolName,schoolType:e.state.schoolType,schoolAddress:o,schoolNote:e.state.schoolNote};console.log(n,"newschool"),s.push(n)},e.updateAddress=function(t,o){var s=Object(f.a)({},e.state.schoolAddress);s[o]=t.target.value,e.setState({schoolAddress:s})},e.state={schoolName:"",schoolType:"",schoolNote:"",schoolAddress:{street:"",city:"",province:"",postalCode:"",country:""}},e}return Object(i.a)(o,[{key:"render",value:function(){var e=this;return Object(s.jsx)(n.Fragment,{children:Object(s.jsxs)("form",{children:[Object(s.jsx)("label",{htmlFor:"newSchoolName",children:"School Name"}),Object(s.jsx)("input",{type:"text",id:"newSchoolName",value:this.state.schoolName,onChange:function(t){return e.setState({schoolName:t.target.value})}}),Object(s.jsx)("br",{}),Object(s.jsx)("legend",{children:"School Type"}),Object(s.jsx)("input",{type:"radio",id:"university",name:"schoolType",value:"University",required:!0,checked:"University"===this.state.schoolType,onChange:function(t){return e.setState({schoolType:t.target.value})}}),Object(s.jsx)("label",{htmlFor:"university",children:"University"}),Object(s.jsx)("input",{type:"radio",id:"college",name:"schoolType",value:"Community College",checked:"Community College"===this.state.schoolType,onChange:function(t){return e.setState({schoolType:t.target.value})}}),Object(s.jsx)("label",{htmlFor:"college",children:"College"}),Object(s.jsx)("input",{type:"radio",id:"tradeSchool",name:"schoolType",value:"Trade School",checked:"Trade School"===this.state.schoolType,onChange:function(t){return e.setState({schoolType:t.target.value})}}),Object(s.jsx)("label",{htmlFor:"tradeSchool",children:"Trade School"}),Object(s.jsx)("br",{}),Object(s.jsx)("label",{htmlFor:"newSchoolAddress",children:"Address"}),Object(s.jsx)("input",{type:"text",id:"newSchoolAddress",value:this.state.schoolAddress.street,onChange:function(t){return e.updateAddress(t,"street")}}),Object(s.jsx)("label",{htmlFor:"newSchoolCity",children:"City"}),Object(s.jsx)("input",{type:"text",id:"newSchoolCity",value:this.state.schoolAddress.city,onChange:function(t){return e.updateAddress(t,"city")}}),Object(s.jsx)("br",{}),Object(s.jsx)("label",{htmlFor:"newSchoolProvince",children:"Province"}),Object(s.jsx)("input",{type:"text",id:"newSchoolProvince",value:this.state.schoolAddress.province,onChange:function(t){return e.updateAddress(t,"province")}}),Object(s.jsx)("label",{htmlFor:"newSchoolPostal",children:"Postal Code"}),Object(s.jsx)("input",{type:"text",id:"newSchoolPostal",value:this.state.schoolAddress.postalCode,onChange:function(t){return e.updateAddress(t,"postalCode")}}),Object(s.jsx)("label",{htmlFor:"newSchoolCountry",children:"Country"}),Object(s.jsx)("input",{type:"text",id:"newSchoolCountry",value:this.state.schoolAddress.country,onChange:function(t){return e.updateAddress(t,"country")}}),Object(s.jsx)("br",{}),Object(s.jsx)("label",{htmlFor:"addNote",children:"Note"}),Object(s.jsx)("textarea",{value:this.state.schoolNote,onChange:function(t){return e.setState({schoolNote:t.target.value})}}),Object(s.jsx)("br",{}),Object(s.jsx)("button",{onClick:this.addSchool,children:"Add new school"})]})})}}]),o}(n.Component),C=function(e){Object(d.a)(o,e);var t=Object(h.a)(o);function o(){var e;return Object(r.a)(this,o),(e=t.call(this)).removeSchool=function(e){O.database().ref("Favourites").child(e).remove()},e.handleAddNotes=function(t){O.database().ref("Favourites").child(t).update({schoolNotes:e.state.schoolNotes}),e.setState({schoolNotes:""})},e.state={schoolNotes:"",schoolId:""},e}return Object(i.a)(o,[{key:"render",value:function(){var e=this,t=this.props.school,o=t.id,n=t.schoolName,a=t.schoolAddress,c=t.schoolNotes;return Object(s.jsxs)("li",{children:[Object(s.jsx)("h3",{children:n}),Object(s.jsx)("p",{children:a}),Object(s.jsxs)("p",{children:[Object(s.jsx)("span",{children:"Notes: "}),c]}),Object(s.jsx)("label",{htmlFor:"notes",children:"Notes"}),Object(s.jsx)("textarea",{value:this.state.schoolNotes,name:"notes",id:"notes",onChange:function(t){return e.setState({schoolNotes:t.target.value,schoolId:o})}}),Object(s.jsx)("button",{onClick:function(){e.handleAddNotes(o)},children:"Add Notes"}),Object(s.jsx)("button",{onClick:function(){e.removeSchool(o)},children:"Remove School"})]},o)}}]),o}(n.Component),S=function(e){Object(d.a)(o,e);var t=Object(h.a)(o);function o(){var e;return Object(r.a)(this,o),(e=t.call(this)).state={favourites:[],schoolNotes:"",schoolId:""},e}return Object(i.a)(o,[{key:"componentDidMount",value:function(){var e=this;O.database().ref().on("value",(function(t){var o,s=t.val().Favourites,n=[];for(var a in s)(o=s[a]).id=a,o.notes=e.state.schoolNotes,n.push(o);e.setState({favourites:n})}))}},{key:"render",value:function(){return console.log(this.state.favourites),Object(s.jsxs)(n.Fragment,{children:[Object(s.jsx)("h2",{children:"Favourites!"}),Object(s.jsx)("ul",{children:this.state.favourites.map((function(e){return console.log(e),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(C,{school:e})})}))})]})}}]),o}(n.Component),N=function(e){Object(d.a)(o,e);var t=Object(h.a)(o);function o(){var e;return Object(r.a)(this,o),(e=t.call(this)).getData=function(){p()({method:"GET",responseType:"json",url:"https://api.foursquare.com/v2/venues/search",params:{client_id:"SMUUEFGVRENHIW3EQX5ICCFCTNQPPIWVXP21E2BQVRH421OF",client_secret:"EVNPHQ3EYKNQKZMOAKRVUTT0KDHXXGNUWUCY0LFZTVRE2BAF",near:e.state.cityInput+" "+e.state.countryInput,categoryId:e.state.schoolTypeId,radius:e.state.radius,v:20201205}}).then((function(t){console.log(t.data.response.venues);var o=t.data.response.venues.filter((function(e){return e.name.includes("University")||"Community College"===e.categories[0].name||"Trade School"===e.categories[0].name&&e.location.formattedAddress.length>2}));console.log(o),e.setState({schoolResults:o}),console.log(e.state.schoolResults[0].location.formattedAddress)})).catch((function(e){console.log(e,"It aint working")})),O.database().ref().on("value",(function(t){var o,s=t.val().NewSchools,n=[];for(var a in s)(o=s[a]).id=a,n.push(o);var c="";"4bf58dd8d48988d1ae941735"===e.state.schoolTypeId?c="University":"4bf58dd8d48988d1a2941735"===e.state.schoolTypeId?c="Community College":"4bf58dd8d48988d1ad941735"===e.state.schoolTypeId&&(c="Trade School"),console.log(c,"school type"),console.log(e.state.cityInput,"city type");var l=n.filter((function(t){var o=t.schoolAddress[1].toLowerCase(),s=t.schoolAddress[2].toLowerCase();return t.schoolType===c&&o.includes(e.state.cityInput.toLowerCase())&&s.includes(e.state.countryInput.toLowerCase())}));console.log(l,"filtered school array"),e.setState({newSchool:n}),console.log(e.state.newSchool,"new school array")}))},e.handleSubmit=function(t){t.preventDefault(),e.getData(),e.setState({isActive:!0})},e.handleSchoolType=function(t){e.setState({schoolTypeId:t.target.value})},e.handleRadius=function(t){console.log(t.target.value),e.setState({radius:t.target.value})},e.handleCityInput=function(t){console.log(t.target.value),e.setState({cityInput:t.target.value})},e.handleCountryInput=function(t){e.setState({countryInput:t.target.value})},e.state={schoolResults:[],favourites:[],radius:"",schoolTypeId:"",cityInput:"",countryInput:"",formattedAddress:[],newSchool:[],favouriteLength:"",isActive:!1},e}return Object(i.a)(o,[{key:"render",value:function(){var e=this;return Object(s.jsxs)(u.a,{children:[Object(s.jsx)(y,{schoolHandler:this.handleSchoolType,radiusHandler:this.handleRadius,handleCityInput:this.handleCityInput,handleCountryInput:this.handleCountryInput,submitHandler:this.handleSubmit}),this.state.isActive?Object(s.jsx)(j.a,{exact:!0,path:"/",render:function(){return Object(s.jsx)(x,{schoolResults:e.state.schoolResults,schoolsAdded:e.state.newSchool,userCityInput:e.state.cityInput,userCountryInput:e.state.countryInput})}}):null,Object(s.jsx)(j.a,{path:"/addSchool",component:g}),Object(s.jsx)(j.a,{path:"/favourites",component:S})]})}}]),o}(n.Component),A=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,72)).then((function(t){var o=t.getCLS,s=t.getFID,n=t.getFCP,a=t.getLCP,c=t.getTTFB;o(e),s(e),n(e),a(e),c(e)}))};l.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(N,{})}),document.getElementById("root")),A()}},[[71,1,2]]]);
//# sourceMappingURL=main.8ae73d01.chunk.js.map